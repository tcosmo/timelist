{% extends "base.html" %} {% import 'bootstrap/wtf.html' as wtf %} {% block app_content %}
<div class="row">
    <h6>
<a href="{{url_for('index', _anchor=list.getAnchor(current_user))}}">Home</a> > <a href="{{url_for('view_list', id=list.id)}}">{{list.name}}</a> </h6>
</div>
<div class="row">
    <div class="col-lg-12">
        <h1> {{ list.name }} <a class="btn btn-primary btn-lg {% if not can_write %}disabled{% endif %}" href="{{url_for('new_entry', id=request.args.get('id'))}}" role="button">New Entry</a> </h1>
    </div>
</div>

<!-- <br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/> -->

<hr class="my-4">
<div class="row">

    <div class="col-lg-12">
        <div class="table-responsive-lg">
            <table class="table table-hover" style="word-wrap: break-word;">

                <!-- <a href="" class="list-group-item list-group-item-action"> -->
                <thead>
                    <tr class="d-flex">
                        <th class="col-2">Date</th>
                        <th class="col-6">Title</th>
                        <th class="col-2">More</th>
                        <th class="col-2">Actions</th>
                    </tr>
                </thead>
                {% if not entries %}
                <tbody>
                    <td colspan="4"> No entry found. </td>
                </tbody>
                {% endif %} {% for entry in entries %}
                <div class="modal fade" id="remove-{{entry.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Remove Entry "{{entry.title}}" ?</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                Are you sure to remove the entry "{{entry.title}}" ?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <a role="button" class="btn btn-primary" href="{{url_for('view_list',id=entry.list_id,remove=entry.id)}}">Yes</a>
                            </div>
                        </div>
                    </div>
                </div>
                <tbody>
                    <tr class="d-flex">

                        <td style="padding-right:20px;" class="col-2">
                            <h4 class="font-weight-bold text-info">{{ entry.getFormattedDate() }}</h4>
                        </td>
                        <td class="clickable col-6" data-toggle="collapse" data-collapse-group="entries" data-target="#entry-{{ entry.id }}" aria-expanded="false" aria-controls="#entry-{{ entry.id }}" style="align:left;cursor:pointer;">
                            <h5>{{ entry.title }}</h5>
                        </td>
                        <td class="col-2">

                            <a href="{{url_for('folder',list=entry.list_id, entry=entry.id)}}" target="_blank" rel="noopener noreferrer" class="btn"><i class="fa fa-folder fa-2x icon-green" data-count="900" aria-hidden="true" title="Associated files"></i></a> {% if entry.getNbFiles() %}<span class="badge badge-primary badge-pill" title="Number of files">{{entry.getNbFiles()}}</span>{% endif %}

                        </td>
                        <td class="col-2">

                            <a href="{{url_for('new_entry', id=entry.list_id, edit=entry.id)}}" class="btn no-pad-right-left {% if not can_write %}disabled{% endif %}"><i class="fa fa-pencil fa-2x icon-blue" aria-hidden="true" title="Edit entry"></i></a> &nbsp;
                            <a href="#" data-toggle="modal" data-target="#remove-{{entry.id}}" class="btn no-pad-right-left {% if not can_write %}disabled{% endif %}"><i class="fa  fa-times fa-2x icon-red" title="Remove entry" aria-hidden="true"></i></a>
                            <p id="link-{{entry.id}}" hidden>#entry-{{entry.id}}</p>

                            <a  class="btn no-pad-right" id="button-link-{{entry.id}}"  onclick="copyToClipboard('#link-{{entry.id | safe}}');"> <i title="Copy Entry Link" class="fa fa-link fa-2x icon-green"></i></a>
                        </td>
                    </tr>
                </tbody>
                <tbody id="entry-{{ entry.id }}" class="collapse">
                    <tr>
                        <td colspan="4">
                            {{ entry.getFormattedContent() }} {% if current_user.is_admin %}
                            <br/>
                            <h8>static folder: {{ entry.static_folder }}</h8>
                            {% endif %}
                            <br/>
                            <h8>last modified: {{ entry.last_modified.strftime(time_format) }}</h8>
                            <br/>
                            <h8>created: {{ entry.created.strftime(time_format) }}</h8>
                        </td>
                    </tr>
                </tbody>
                {% endfor %}

            </table>

        </div>
    </div>

</div>

<div class="row">
    <div class="col-lg-12">
        <h8>last modified: {{ list.last_modified.strftime(time_format) }}</h8>
        <br/>
        <h8>created: {{ list.created.strftime(time_format) }}</h8>
    </div>
</div>
{% endblock %}